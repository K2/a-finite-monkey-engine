# Base Query Engine

## Overview

The `BaseQueryEngine` serves as the foundation interface for all query engines in the Finite Monkey system. It provides a standardized API for executing queries against smart contract data and enforces a consistent result format through the `QueryResult` model.

## Key Components

### 1. QueryResult Model

The `QueryResult` Pydantic model defines a standardized format for all query responses:
- Original query text for reference
- Response content as generated by the engine
- Sources used in generating the response
- Confidence score indicating result reliability
- Metadata for additional engine-specific information

### 2. BaseQueryEngine Interface

This abstract base class defines the core interface:
- `query()` - Main method for executing single queries (abstract)
- `batch_query()` - Convenience method for executing multiple queries
- `initialize()` - Resource initialization hook
- `shutdown()` - Resource cleanup hook

### 3. Configuration System

The engine supports a standardized configuration approach:
- Config dictionary passed at initialization
- Default values provided when configuration is missing
- Subclasses can implement specific configuration interpretation

## Integration Points

### With Query Engine Implementations

All query engine implementations must:
1. Inherit from `BaseQueryEngine`
2. Implement the `query()` method
3. Return standardized `QueryResult` objects
4. Properly handle resource initialization and cleanup

### With Pipeline Context

Query engines interact with the Context by:
1. Receiving a context object during query execution
2. Reading relevant information from context
3. Potentially modifying context with query results

## Usage Patterns

### Async/Await Pattern

The engines follow the async/await pattern for non-blocking operation:
- All public methods are async
- Resources are loaded asynchronously
- Queries execute without blocking the main thread

### Resource Management

Explicit resource management is expected:
- Initialize with `await engine.initialize()`
- Clean up with `await engine.shutdown()`
- Can be used with Python's async context managers