[2025-03-24 02:50:17] [selector_events.py:64] [[36mDEBUG[0m] asyncio: Using selector: EpollSelector
[2025-03-24 02:50:39] [selector_events.py:64] [[36mDEBUG[0m] asyncio: Using selector: EpollSelector
2025-03-24T02:52:51.960121-0400 - INFO - Starting diagnostic analysis
2025-03-24T02:52:51.960308-0400 - INFO - Creating sample test file at /home/files/git/a-finite-monkey-engine/tests/fixtures/sample_contract.sol
2025-03-24T02:52:51.960395-0400 - INFO - Analyzing project_loader.py structure
2025-03-24T02:52:51.960469-0400 - INFO - Project loader file size: 6836 bytes
2025-03-24T02:52:51.960517-0400 - INFO - Found class: AsyncProjectLoader
2025-03-24T02:52:51.960548-0400 - DEBUG - Found method: _init__ (async: False)
2025-03-24T02:52:51.960570-0400 - DEBUG - Found method: oad_project (async: True)
2025-03-24T02:52:51.960591-0400 - DEBUG - Found method: oad_file (async: True)
2025-03-24T02:52:51.960614-0400 - DEBUG - Found method: oad_and_chunk_project (async: True)
2025-03-24T02:52:51.960684-0400 - INFO - File loading implementation found
2025-03-24T02:52:51.960711-0400 - DEBUG - Load file [1]:         async def load_file(file_path: str):
2025-03-24T02:52:51.960726-0400 - DEBUG - Load file [2]:             async with semaphore:
2025-03-24T02:52:51.960740-0400 - DEBUG - Load file [3]:                 try:
2025-03-24T02:52:51.960753-0400 - DEBUG - Load file [4]:                     # Read file content
2025-03-24T02:52:51.960766-0400 - DEBUG - Load file [5]:                     async with aiofiles.open(file_path, 'r', encoding='utf-8', errors='ignore') as f:
2025-03-24T02:52:51.960778-0400 - DEBUG - Load file [6]:                         content = await f.read()
2025-03-24T02:52:51.960790-0400 - DEBUG - Load file [7]:                     
2025-03-24T02:52:51.960803-0400 - DEBUG - Load file [8]:                     # Create file info
2025-03-24T02:52:51.960816-0400 - DEBUG - Load file [9]:                     file_id = file_path
2025-03-24T02:52:51.960829-0400 - DEBUG - Load file [10]:                     file_info = {
2025-03-24T02:52:51.960845-0400 - INFO - Analyzing async_chunker.py structure
2025-03-24T02:52:51.960904-0400 - INFO - Async chunker file size: 33409 bytes
2025-03-24T02:52:51.960979-0400 - INFO - Found chunk_code method: async def chunk_code(
2025-03-24T02:52:51.961046-0400 - INFO - Found process_file_chunks method: async def process_file_chunks(self, context, file_data, file_id, max_retries: int = 3):
2025-03-24T02:52:51.961099-0400 - DEBUG - Field 'name' referenced 1 times
2025-03-24T02:52:51.961124-0400 - DEBUG - Field 'function_name' referenced 1 times
2025-03-24T02:52:51.961149-0400 - DEBUG - Field 'contract_name' referenced 4 times
2025-03-24T02:52:51.961187-0400 - DEBUG - Field 'source_file' referenced 4 times
2025-03-24T02:52:51.961270-0400 - INFO - Analyzing processors.py structure
2025-03-24T02:52:51.961325-0400 - INFO - Processors file size: 5705 bytes
2025-03-24T02:52:51.961379-0400 - INFO - Found transform_chunks_to_context: def transform_chunks_to_context(context, chunks, file_id):
2025-03-24T02:52:51.961407-0400 - INFO - Parameters: ['context', 'chunks', 'file_id']
2025-03-24T02:52:51.961442-0400 - INFO - Context properties initialized: ['contracts', 'functions', 'contracts[contract_name]', 'contracts[contract_name].functions', 'contracts[contract_name].events', 'contracts[contract_name].errors', 'functions[function_id]', 'contracts[contract_name].functions[function_name]', 'contracts[contract_name].events[event_name]', 'contracts[contract_name].errors[error_name]']
2025-03-24T02:52:51.961488-0400 - INFO - Found 8 warning/error messages
2025-03-24T02:52:51.961510-0400 - DEBUG - Warning/Error [1]: logger.warning(f"Skipping contract with filename as name: {contract_name}")
2025-03-24T02:52:51.961523-0400 - DEBUG - Warning/Error [2]: if not hasattr(context.contracts[contract_name], 'errors'):
2025-03-24T02:52:51.961538-0400 - DEBUG - Warning/Error [3]: context.contracts[contract_name].errors = Box(default_box=True)
2025-03-24T02:52:51.961551-0400 - DEBUG - Warning/Error [4]: logger.warning(f"Skipping function with filename as name: {function_name}")
2025-03-24T02:52:51.961568-0400 - DEBUG - Warning/Error [5]: # Process events and errors that were created as standalone chunks
2025-03-24T02:52:51.961585-0400 - INFO - 
===== Diagnosis Summary =====
2025-03-24T02:52:51.961607-0400 - INFO - Project loader: ['AsyncProjectLoader']
2025-03-24T02:52:51.961627-0400 - INFO - Async chunker has chunk_code: Yes
2025-03-24T02:52:51.961645-0400 - INFO - Processors has transform_chunks_to_context: Yes
2025-03-24T02:52:51.961663-0400 - INFO - 
===== Potential Issues =====
2025-03-24T02:52:51.961683-0400 - WARNING - Class name mismatch: Found AsyncProjectLoader but not ProjectLoader
2025-03-24T02:52:51.961702-0400 - INFO - Checking metadata field consistency:
2025-03-24T02:52:51.961722-0400 - INFO -   - name: Referenced 1 times
2025-03-24T02:52:51.961740-0400 - INFO -   - function_name: Referenced 1 times
2025-03-24T02:52:51.961763-0400 - INFO -   - contract_name: Referenced 4 times
2025-03-24T02:52:51.961782-0400 - INFO -   - source_file: Referenced 4 times
2025-03-24T02:52:51.961800-0400 - INFO - 
===== Recommendations =====
2025-03-24T02:52:51.961819-0400 - INFO - 1. Update scripts to use AsyncProjectLoader instead of ProjectLoader
2025-03-24T02:52:51.961837-0400 - INFO - 2. Focus on metadata field handling between loader and chunker:
2025-03-24T02:52:51.961855-0400 - INFO -    - Ensure file_path vs path consistency
2025-03-24T02:52:51.961874-0400 - INFO -    - Check name vs basename handling
2025-03-24T02:52:51.961892-0400 - INFO -    - Verify contract_name and function_name propagation
2025-03-24T02:52:51.961910-0400 - INFO - 3. Consider adding explicit debugging to transform_chunks_to_context
2025-03-24T02:52:51.961928-0400 - INFO - 
Diagnosis complete
2025-03-24T02:55:13.488437-0400 - INFO - Starting diagnostic analysis
2025-03-24T02:55:13.488592-0400 - INFO - Sample test file already exists at /home/files/git/a-finite-monkey-engine/tests/fixtures/sample_contract.sol
2025-03-24T02:55:13.488645-0400 - INFO - Analyzing project_loader.py structure
2025-03-24T02:55:13.488721-0400 - INFO - Project loader file size: 6836 bytes
2025-03-24T02:55:13.488771-0400 - INFO - Found class: AsyncProjectLoader
2025-03-24T02:55:13.488803-0400 - DEBUG - Found method: _init__ (async: False)
2025-03-24T02:55:13.488824-0400 - DEBUG - Found method: oad_project (async: True)
2025-03-24T02:55:13.488844-0400 - DEBUG - Found method: oad_file (async: True)
2025-03-24T02:55:13.488866-0400 - DEBUG - Found method: oad_and_chunk_project (async: True)
2025-03-24T02:55:13.488931-0400 - INFO - File loading implementation found
2025-03-24T02:55:13.488958-0400 - DEBUG - Load file [1]:         async def load_file(file_path: str):
2025-03-24T02:55:13.488973-0400 - DEBUG - Load file [2]:             async with semaphore:
2025-03-24T02:55:13.488987-0400 - DEBUG - Load file [3]:                 try:
2025-03-24T02:55:13.489000-0400 - DEBUG - Load file [4]:                     # Read file content
2025-03-24T02:55:13.489012-0400 - DEBUG - Load file [5]:                     async with aiofiles.open(file_path, 'r', encoding='utf-8', errors='ignore') as f:
2025-03-24T02:55:13.489024-0400 - DEBUG - Load file [6]:                         content = await f.read()
2025-03-24T02:55:13.489041-0400 - DEBUG - Load file [7]:                     
2025-03-24T02:55:13.489053-0400 - DEBUG - Load file [8]:                     # Create file info
2025-03-24T02:55:13.489064-0400 - DEBUG - Load file [9]:                     file_id = file_path
2025-03-24T02:55:13.489076-0400 - DEBUG - Load file [10]:                     file_info = {
2025-03-24T02:55:13.489092-0400 - INFO - Analyzing async_chunker.py structure
2025-03-24T02:55:13.489151-0400 - INFO - Async chunker file size: 33409 bytes
2025-03-24T02:55:13.489228-0400 - INFO - Found chunk_code method: async def chunk_code(
2025-03-24T02:55:13.489294-0400 - INFO - Found process_file_chunks method: async def process_file_chunks(self, context, file_data, file_id, max_retries: int = 3):
2025-03-24T02:55:13.489347-0400 - DEBUG - Field 'name' referenced 1 times
2025-03-24T02:55:13.489376-0400 - DEBUG - Field 'function_name' referenced 1 times
2025-03-24T02:55:13.489401-0400 - DEBUG - Field 'contract_name' referenced 4 times
2025-03-24T02:55:13.489438-0400 - DEBUG - Field 'source_file' referenced 4 times
2025-03-24T02:55:13.489522-0400 - INFO - Analyzing processors.py structure
2025-03-24T02:55:13.489575-0400 - INFO - Processors file size: 5705 bytes
2025-03-24T02:55:13.489626-0400 - INFO - Found transform_chunks_to_context: def transform_chunks_to_context(context, chunks, file_id):
2025-03-24T02:55:13.489652-0400 - INFO - Parameters: ['context', 'chunks', 'file_id']
2025-03-24T02:55:13.489685-0400 - INFO - Context properties initialized: ['contracts', 'functions', 'contracts[contract_name]', 'contracts[contract_name].functions', 'contracts[contract_name].events', 'contracts[contract_name].errors', 'functions[function_id]', 'contracts[contract_name].functions[function_name]', 'contracts[contract_name].events[event_name]', 'contracts[contract_name].errors[error_name]']
2025-03-24T02:55:13.489725-0400 - INFO - Found 8 warning/error messages
2025-03-24T02:55:13.489747-0400 - DEBUG - Warning/Error [1]: logger.warning(f"Skipping contract with filename as name: {contract_name}")
2025-03-24T02:55:13.489762-0400 - DEBUG - Warning/Error [2]: if not hasattr(context.contracts[contract_name], 'errors'):
2025-03-24T02:55:13.489775-0400 - DEBUG - Warning/Error [3]: context.contracts[contract_name].errors = Box(default_box=True)
2025-03-24T02:55:13.489787-0400 - DEBUG - Warning/Error [4]: logger.warning(f"Skipping function with filename as name: {function_name}")
2025-03-24T02:55:13.489800-0400 - DEBUG - Warning/Error [5]: # Process events and errors that were created as standalone chunks
2025-03-24T02:55:13.489815-0400 - INFO - 
===== Diagnosis Summary =====
2025-03-24T02:55:13.489837-0400 - INFO - Project loader: ['AsyncProjectLoader']
2025-03-24T02:55:13.489857-0400 - INFO - Async chunker has chunk_code: Yes
2025-03-24T02:55:13.489874-0400 - INFO - Processors has transform_chunks_to_context: Yes
2025-03-24T02:55:13.489891-0400 - INFO - 
===== Potential Issues =====
2025-03-24T02:55:13.489910-0400 - WARNING - Class name mismatch: Found AsyncProjectLoader but not ProjectLoader
2025-03-24T02:55:13.489928-0400 - INFO - Checking metadata field consistency:
2025-03-24T02:55:13.489946-0400 - INFO -   - name: Referenced 1 times
2025-03-24T02:55:13.489963-0400 - INFO -   - function_name: Referenced 1 times
2025-03-24T02:55:13.489980-0400 - INFO -   - contract_name: Referenced 4 times
2025-03-24T02:55:13.489999-0400 - INFO -   - source_file: Referenced 4 times
2025-03-24T02:55:13.490018-0400 - INFO - 
===== Recommendations =====
2025-03-24T02:55:13.490038-0400 - INFO - 1. Update scripts to use AsyncProjectLoader instead of ProjectLoader
2025-03-24T02:55:13.490055-0400 - INFO - 2. Focus on metadata field handling between loader and chunker:
2025-03-24T02:55:13.490073-0400 - INFO -    - Ensure file_path vs path consistency
2025-03-24T02:55:13.490091-0400 - INFO -    - Check name vs basename handling
2025-03-24T02:55:13.490107-0400 - INFO -    - Verify contract_name and function_name propagation
2025-03-24T02:55:13.490125-0400 - INFO - 3. Consider adding explicit debugging to transform_chunks_to_context
2025-03-24T02:55:13.490142-0400 - INFO - 
Diagnosis complete
2025-03-24T02:58:50.129772-0400 - INFO - Starting diagnostic analysis
2025-03-24T02:58:50.129942-0400 - INFO - Sample test file already exists at /home/files/git/a-finite-monkey-engine/tests/fixtures/sample_contract.sol
2025-03-24T02:58:50.129991-0400 - INFO - Analyzing project_loader.py structure
2025-03-24T02:58:50.130065-0400 - INFO - Project loader file size: 6836 bytes
2025-03-24T02:58:50.130114-0400 - INFO - Found class: AsyncProjectLoader
2025-03-24T02:58:50.130143-0400 - DEBUG - Found method: _init__ (async: False)
2025-03-24T02:58:50.130164-0400 - DEBUG - Found method: oad_project (async: True)
2025-03-24T02:58:50.130185-0400 - DEBUG - Found method: oad_file (async: True)
2025-03-24T02:58:50.130207-0400 - DEBUG - Found method: oad_and_chunk_project (async: True)
2025-03-24T02:58:50.130280-0400 - INFO - File loading implementation found
2025-03-24T02:58:50.130307-0400 - DEBUG - Load file [1]:         async def load_file(file_path: str):
2025-03-24T02:58:50.130323-0400 - DEBUG - Load file [2]:             async with semaphore:
2025-03-24T02:58:50.130338-0400 - DEBUG - Load file [3]:                 try:
2025-03-24T02:58:50.130350-0400 - DEBUG - Load file [4]:                     # Read file content
2025-03-24T02:58:50.130363-0400 - DEBUG - Load file [5]:                     async with aiofiles.open(file_path, 'r', encoding='utf-8', errors='ignore') as f:
2025-03-24T02:58:50.130375-0400 - DEBUG - Load file [6]:                         content = await f.read()
2025-03-24T02:58:50.130387-0400 - DEBUG - Load file [7]:                     
2025-03-24T02:58:50.130401-0400 - DEBUG - Load file [8]:                     # Create file info
2025-03-24T02:58:50.130414-0400 - DEBUG - Load file [9]:                     file_id = file_path
2025-03-24T02:58:50.130426-0400 - DEBUG - Load file [10]:                     file_info = {
2025-03-24T02:58:50.130442-0400 - INFO - Analyzing async_chunker.py structure
2025-03-24T02:58:50.130502-0400 - INFO - Async chunker file size: 33409 bytes
2025-03-24T02:58:50.130578-0400 - INFO - Found chunk_code method: async def chunk_code(
2025-03-24T02:58:50.130644-0400 - INFO - Found process_file_chunks method: async def process_file_chunks(self, context, file_data, file_id, max_retries: int = 3):
2025-03-24T02:58:50.130696-0400 - DEBUG - Field 'name' referenced 1 times
2025-03-24T02:58:50.130721-0400 - DEBUG - Field 'function_name' referenced 1 times
2025-03-24T02:58:50.130746-0400 - DEBUG - Field 'contract_name' referenced 4 times
2025-03-24T02:58:50.130784-0400 - DEBUG - Field 'source_file' referenced 4 times
2025-03-24T02:58:50.130867-0400 - INFO - Analyzing processors.py structure
2025-03-24T02:58:50.130921-0400 - INFO - Processors file size: 5705 bytes
2025-03-24T02:58:50.130973-0400 - INFO - Found transform_chunks_to_context: def transform_chunks_to_context(context, chunks, file_id):
2025-03-24T02:58:50.131000-0400 - INFO - Parameters: ['context', 'chunks', 'file_id']
2025-03-24T02:58:50.131034-0400 - INFO - Context properties initialized: ['contracts', 'functions', 'contracts[contract_name]', 'contracts[contract_name].functions', 'contracts[contract_name].events', 'contracts[contract_name].errors', 'functions[function_id]', 'contracts[contract_name].functions[function_name]', 'contracts[contract_name].events[event_name]', 'contracts[contract_name].errors[error_name]']
2025-03-24T02:58:50.131075-0400 - INFO - Found 8 warning/error messages
2025-03-24T02:58:50.131096-0400 - DEBUG - Warning/Error [1]: logger.warning(f"Skipping contract with filename as name: {contract_name}")
2025-03-24T02:58:50.131110-0400 - DEBUG - Warning/Error [2]: if not hasattr(context.contracts[contract_name], 'errors'):
2025-03-24T02:58:50.131122-0400 - DEBUG - Warning/Error [3]: context.contracts[contract_name].errors = Box(default_box=True)
2025-03-24T02:58:50.131134-0400 - DEBUG - Warning/Error [4]: logger.warning(f"Skipping function with filename as name: {function_name}")
2025-03-24T02:58:50.131146-0400 - DEBUG - Warning/Error [5]: # Process events and errors that were created as standalone chunks
2025-03-24T02:58:50.131161-0400 - INFO - 
===== Diagnosis Summary =====
2025-03-24T02:58:50.131185-0400 - INFO - Project loader: ['AsyncProjectLoader']
2025-03-24T02:58:50.131206-0400 - INFO - Async chunker has chunk_code: Yes
2025-03-24T02:58:50.131224-0400 - INFO - Processors has transform_chunks_to_context: Yes
2025-03-24T02:58:50.131241-0400 - INFO - 
===== Potential Issues =====
2025-03-24T02:58:50.131260-0400 - WARNING - Class name mismatch: Found AsyncProjectLoader but not ProjectLoader
2025-03-24T02:58:50.131279-0400 - INFO - Checking metadata field consistency:
2025-03-24T02:58:50.131297-0400 - INFO -   - name: Referenced 1 times
2025-03-24T02:58:50.131314-0400 - INFO -   - function_name: Referenced 1 times
2025-03-24T02:58:50.131332-0400 - INFO -   - contract_name: Referenced 4 times
2025-03-24T02:58:50.131351-0400 - INFO -   - source_file: Referenced 4 times
2025-03-24T02:58:50.131370-0400 - INFO - 
===== Recommendations =====
2025-03-24T02:58:50.131390-0400 - INFO - 1. Update scripts to use AsyncProjectLoader instead of ProjectLoader
2025-03-24T02:58:50.131408-0400 - INFO - 2. Focus on metadata field handling between loader and chunker:
2025-03-24T02:58:50.131425-0400 - INFO -    - Ensure file_path vs path consistency
2025-03-24T02:58:50.131444-0400 - INFO -    - Check name vs basename handling
2025-03-24T02:58:50.131462-0400 - INFO -    - Verify contract_name and function_name propagation
2025-03-24T02:58:50.131481-0400 - INFO - 3. Consider adding explicit debugging to transform_chunks_to_context
2025-03-24T02:58:50.131499-0400 - INFO - 
Diagnosis complete
